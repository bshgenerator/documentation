---
title: Entities API
---

# Entities API

The Entities API provides comprehensive CRUD operations for dynamic entity management. It supports both core system entities and custom entities with full search, filtering, and export capabilities.

## Base Endpoint

```
{{baseUrl}}/api/entities
```

## Core System Entities

### BshEntities

Entity definitions and metadata management.

**Base Path:** `/api/entities/BshEntities`

#### Get Entity Definition
**Endpoint:** `GET /api/entities/BshEntities/:entityName`

**Parameters:**
- `entityName` (path): Name of the entity definition

**Response:**
```json
{
  "success": true,
  "data": {
    "persistenceId": 1,
    "name": "CustomEntity",
    "dbTable": "CustomEntity",
    "dbSchema": "custom",
    "dbSource": "main",
    "updateStrategy": "Upsert",
    "insertDuplicate": "Upsert",
    "pks": [
      {
        "key": "id",
        "strategy": "AutoIncrement",
        "type": "integer"
      }
    ],
    "permissions": {
      "read": true,
      "write": true,
      "delete": true,
      "update": true
    },
    "auditable": true
  }
}
```

#### Create Entity Definition
**Endpoint:** `POST /api/entities/BshEntities`

**Request Body:**
```json
{
  "name": "CustomEntity",
  "dbTable": "CustomEntity",
  "dbSchema": "custom",
  "dbSource": "main",
  "updateStrategy": "Upsert",
  "insertDuplicate": "Upsert",
  "pks": [
    {
      "key": "id",
      "strategy": "AutoIncrement",
      "type": "integer"
    }
  ],
  "permissions": {
    "read": true,
    "write": true,
    "delete": true,
    "update": true
  },
  "auditable": true
}
```

#### Search Entity Definitions
**Endpoint:** `POST /api/entities/BshEntities/search`

**Request Body:**
```json
{
  "fields": ["name", "dbTable", "dbSchema", "dbSource", "updateStrategy"],
  "query": [
    {
      "field": "dbSchema",
      "operator": "eq",
      "value": "core",
      "type": "string"
    },
    {
      "field": "name",
      "operator": "like",
      "value": "Bsh%",
      "type": "string"
    }
  ],
  "sort": [
    {
      "field": "name",
      "direction": 1
    }
  ],
  "pagination": {
    "page": 0,
    "size": 20
  }
}
```

### BshUsers

User management entity with profile support.

**Base Path:** `/api/entities/BshUsers`

#### Get User
**Endpoint:** `GET /api/entities/BshUsers/:userId`

#### Create User
**Endpoint:** `POST /api/entities/BshUsers`

**Request Body:**
```json
{
  "userId": "user-123",
  "email": "user@example.com",
  "roles": ["ROLE_USER"],
  "password": "password123",
  "profile": {
    "full name": "John Doe",
    "phone": "+1234567890",
    "address": "123 Main St, City, Country"
  }
}
```

#### Search Users
**Endpoint:** `POST /api/entities/BshUsers/search`

**Request Body:**
```json
{
  "fields": ["userId", "email", "roles", "profile", "createdAt"],
  "query": [
    {
      "field": "email",
      "operator": "like",
      "value": "%@example.com",
      "type": "string"
    },
    {
      "field": "roles",
      "operator": "contains",
      "value": "ROLE_USER",
      "type": "array"
    }
  ],
  "sort": [
    {
      "field": "createdAt",
      "direction": -1
    }
  ],
  "pagination": {
    "page": 0,
    "size": 10
  }
}
```

### BshConfigurations

System configuration management.

**Base Path:** `/api/entities/BshConfigurations`

#### Create Configuration
**Endpoint:** `POST /api/entities/BshConfigurations`

**Request Body:**
```json
{
  "name": "email-settings(gmail)",
  "config": {
    "email": "admin@example.com",
    "password": "app_password",
    "host": "smtp.gmail.com",
    "port": 587,
    "protocol": "smtp",
    "auth": true,
    "starttls": true,
    "from": "admin@example.com"
  }
}
```

### BshFiles

File management and metadata.

**Base Path:** `/api/entities/BshFiles`

#### Search Files
**Endpoint:** `POST /api/entities/BshFiles/search`

**Request Body:**
```json
{
  "fields": ["fileId", "publicId", "secureUrl", "tags", "context", "createdAt"],
  "query": [
    {
      "field": "tags",
      "operator": "contains",
      "value": "product",
      "type": "array"
    },
    {
      "field": "createdAt",
      "operator": "gte",
      "value": "2024-01-01T00:00:00Z",
      "type": "datetime"
    }
  ],
  "sort": [
    {
      "field": "createdAt",
      "direction": -1
    }
  ],
  "pagination": {
    "page": 0,
    "size": 50
  }
}
```

### BshEmails

Email logs and history.

**Base Path:** `/api/entities/BshEmails`

### BshRoles

Role-based access control.

**Base Path:** `/api/entities/BshRoles`

#### Create Role
**Endpoint:** `POST /api/entities/BshRoles`

**Request Body:**
```json
{
  "name": "ROLE_MANAGER",
  "description": "Manager role with limited admin access"
}
```

### BshPolicies

Security policies and rules.

**Base Path:** `/api/entities/BshPolicies`

#### Create Policy
**Endpoint:** `POST /api/entities/BshPolicies`

**Request Body:**
```json
{
  "name": "ROLE_USER_READ_ONLY",
  "description": "Users can only read data",
  "principals": [
    {
      "type": "ROLE",
      "value": ["ROLE_USER"]
    }
  ],
  "permissions": [
    {
      "entity": ["*"],
      "actions": ["READ"],
      "allow": true
    }
  ],
  "enabled": true,
  "priority": 100
}
```

### BshTypes

Data type definitions.

**Base Path:** `/api/entities/BshTypes`

#### Create Type
**Endpoint:** `POST /api/entities/BshTypes`

**Request Body:**
```json
{
  "name": "user-status",
  "label": "User Status",
  "plugin": "core",
  "baseType": "string",
  "schema": "{\"type\": \"string\", \"enum\": [\"active\", \"inactive\", \"suspended\", \"pending\"]}",
  "meta": {
    "description": "User account status types",
    "pattern": "^(active|inactive|suspended|pending)$",
    "maxLength": 10,
    "minLength": 6
  }
}
```

### BshSchemas

Database schema definitions.

**Base Path:** `/api/entities/BshSchemas`

#### Create Schema
**Endpoint:** `POST /api/entities/BshSchemas`

**Request Body:**
```json
{
  "name": "user-profile",
  "label": "User Profile Schema",
  "description": "Schema for user profile data with validation rules",
  "plugin": "core",
  "properties": [
    {
      "type": "string",
      "name": "firstName",
      "displayName": "First Name",
      "description": "User's first name",
      "required": true,
      "unique": false,
      "default": "",
      "length": 0,
      "maxLength": 50,
      "minLength": 1,
      "pattern": "^[a-zA-Z\\s]+$"
    }
  ]
}
```

## Dynamic Entity Operations

### Generic Entity CRUD

**Base Path:** `/api/entities/:entityName`

#### Get Entity by ID
**Endpoint:** `GET /api/entities/:entityName/:entityId`

#### Create Entity
**Endpoint:** `POST /api/entities/:entityName`

**Request Body:**
```json
{
  "name": "John Doe",
  "email": "john@example.com",
  "active": true
}
```

#### Create Entities Batch
**Endpoint:** `POST /api/entities/:entityName/batch`

**Request Body:**
```json
[
  {
    "name": "John Doe",
    "email": "john@example.com"
  },
  {
    "name": "Jane Smith",
    "email": "jane@example.com"
  }
]
```

#### Update Entity
**Endpoint:** `PUT /api/entities/:entityName`

**Request Body:**
```json
{
  "persistenceId": 1,
  "name": "John Doe Updated",
  "email": "john.updated@example.com"
}
```

#### Search Entities
**Endpoint:** `POST /api/entities/:entityName/search`

**Request Body:**
```json
{
  "fields": ["persistenceId", "name", "email", "createdAt", "updatedAt"],
  "query": [
    {
      "field": "name",
      "operator": "like",
      "value": "John%",
      "type": "string"
    },
    {
      "field": "createdAt",
      "operator": "gte",
      "value": "2024-01-01T00:00:00Z",
      "type": "datetime"
    }
  ],
  "sort": [
    {
      "field": "name",
      "direction": 1
    },
    {
      "field": "createdAt",
      "direction": -1
    }
  ],
  "pagination": {
    "page": 0,
    "size": 10
  }
}
```

#### Delete Entity by ID
**Endpoint:** `DELETE /api/entities/:entityName/:entityId`

#### Delete Entities by Search
**Endpoint:** `POST /api/entities/:entityName/delete`

**Request Body:**
```json
{
  "query": [
    {
      "field": "active",
      "operator": "eq",
      "value": false,
      "type": "boolean"
    },
    {
      "field": "createdAt",
      "operator": "lt",
      "value": "2023-01-01T00:00:00Z",
      "type": "datetime"
    }
  ]
}
```

#### Get Entity Columns
**Endpoint:** `GET /api/entities/:entityName/columns`

#### Export Entities
**Endpoint:** `POST /api/entities/:entityName/export?format={{format}}&name={{exportName}}`

**Query Parameters:**
- `format`: Export format (csv, xlsx, or json)
- `name`: Optional export filename

**Request Body:**
```json
{
  "fields": ["persistenceId", "name", "email", "active", "createdAt"],
  "query": [
    {
      "field": "active",
      "operator": "eq",
      "value": true,
      "type": "boolean"
    }
  ],
  "sort": [
    {
      "field": "createdAt",
      "direction": -1
    }
  ]
}
```

## Query Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `eq` | Equal | `"value": "exact"` |
| `ne` | Not equal | `"value": "different"` |
| `like` | Pattern match | `"value": "John%"` |
| `in` | In array | `"value": ["val1", "val2"]` |
| `nin` | Not in array | `"value": ["val1", "val2"]` |
| `contains` | Array contains | `"value": "item"` |
| `gt` | Greater than | `"value": 100` |
| `gte` | Greater than or equal | `"value": 100` |
| `lt` | Less than | `"value": 100` |
| `lte` | Less than or equal | `"value": 100` |

## Data Types

| Type | Description | Example |
|------|-------------|---------|
| `string` | Text data | `"John Doe"` |
| `number` | Numeric data | `42` |
| `boolean` | True/false | `true` |
| `datetime` | Date and time | `"2024-01-15T10:30:00Z"` |
| `array` | List of values | `["item1", "item2"]` |

## Batch Operations

All entities support batch operations for improved performance:

- **Batch Create**: `POST /api/entities/:entityName/batch`
- **Batch Update**: `PUT /api/entities/:entityName/batch`

## Export Formats

Entities can be exported in multiple formats:

- **CSV**: Comma-separated values
- **XLSX**: Excel spreadsheet
- **JSON**: JSON format

## Permissions

Entity operations respect the following permissions:

- **read**: View entity data
- **write**: Create new entities
- **update**: Modify existing entities
- **delete**: Remove entities

## Error Handling

Common error responses:

### Entity Not Found
```json
{
  "success": false,
  "error": {
    "code": "ENTITY_NOT_FOUND",
    "message": "Entity with ID 123 not found"
  }
}
```

### Validation Error
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid field value",
    "details": {
      "field": "email",
      "message": "Invalid email format"
    }
  }
}
```

### Permission Denied
```json
{
  "success": false,
  "error": {
    "code": "PERMISSION_DENIED",
    "message": "Insufficient permissions for this operation"
  }
}
```