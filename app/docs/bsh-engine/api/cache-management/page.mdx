---
title: Cache Management API
---

# Cache Management API

The Cache Management API provides endpoints for creating, managing, and monitoring application caches with configurable expiration policies and size limits.

## Base Endpoint

```
{{baseUrl}}/api/caching
```

## Endpoints

### Create Cache

Create a new cache with specified configuration.

**Endpoint:** `POST /api/caching`

**Query Parameters:**

| Parameter | Type | Required | Description | Default |
|-----------|------|----------|-------------|---------|
| `name` | string | Yes | Name of the cache | - |
| `maximumSize` | number | No | Maximum number of entries | 1000 |
| `expireAfterWriteSeconds` | number | No | Expire after write in seconds | - |
| `expireAfterAccessSeconds` | number | No | Expire after access in seconds | - |

**Example Request:**
```
POST /api/caching?name=user-cache&maximumSize=1000&expireAfterWriteSeconds=3600&expireAfterAccessSeconds=1800
```

**Response:**
```json
{
  "success": true,
  "data": {
    "name": "user-cache",
    "maximumSize": 1000,
    "expireAfterWriteSeconds": 3600,
    "expireAfterAccessSeconds": 1800,
    "createdAt": "2024-01-15T10:30:00Z"
  }
}
```

### Search Caches

Search and filter caches with pagination.

**Endpoint:** `POST /api/caching/search`

**Request Body:**
```json
{
  "fields": ["name", "size", "hitRate", "missRate", "evictionCount"],
  "query": [
    {
      "field": "name",
      "operator": "like",
      "value": "user%",
      "type": "string"
    },
    {
      "field": "size",
      "operator": "gt",
      "value": 0,
      "type": "number"
    }
  ],
  "sort": [
    {
      "field": "name",
      "direction": 1
    }
  ],
  "pagination": {
    "page": 0,
    "size": 10
  }
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "content": [
      {
        "name": "user-cache",
        "size": 150,
        "hitRate": 0.85,
        "missRate": 0.15,
        "evictionCount": 25,
        "createdAt": "2024-01-15T10:30:00Z"
      }
    ],
    "totalElements": 1,
    "totalPages": 1,
    "size": 10,
    "number": 0
  }
}
```

### Get All Cache Names

Retrieve a list of all cache names.

**Endpoint:** `GET /api/caching/names`

**Response:**
```json
{
  "success": true,
  "data": [
    "user-cache",
    "session-cache",
    "product-cache",
    "config-cache"
  ]
}
```

### Get Cache Info

Get detailed information about a specific cache.

**Endpoint:** `GET /api/caching/:cacheName`

**Parameters:**
- `cacheName` (path): Name of the cache

**Response:**
```json
{
  "success": true,
  "data": {
    "name": "user-cache",
    "size": 150,
    "maximumSize": 1000,
    "hitRate": 0.85,
    "missRate": 0.15,
    "evictionCount": 25,
    "expireAfterWriteSeconds": 3600,
    "expireAfterAccessSeconds": 1800,
    "createdAt": "2024-01-15T10:30:00Z",
    "lastAccessedAt": "2024-01-15T11:45:00Z",
    "statistics": {
      "totalRequests": 1000,
      "cacheHits": 850,
      "cacheMisses": 150,
      "averageLoadTime": 2.5
    }
  }
}
```

### Clear Cache

Clear all entries from a specific cache.

**Endpoint:** `DELETE /api/caching/:cacheName`

**Parameters:**
- `cacheName` (path): Name of the cache to clear

**Response:**
```json
{
  "success": true,
  "data": {
    "name": "user-cache",
    "clearedAt": "2024-01-15T12:00:00Z",
    "entriesCleared": 150
  }
}
```

### Clear Multiple Caches

Clear multiple caches by name.

**Endpoint:** `DELETE /api/caching`

**Request Body:**
```json
["cache1", "cache2", "cache3"]
```

**Response:**
```json
{
  "success": true,
  "data": {
    "clearedCaches": [
      {
        "name": "cache1",
        "entriesCleared": 50
      },
      {
        "name": "cache2",
        "entriesCleared": 75
      },
      {
        "name": "cache3",
        "entriesCleared": 25
      }
    ],
    "totalEntriesCleared": 150,
    "clearedAt": "2024-01-15T12:00:00Z"
  }
}
```

### Clear All Caches

Clear all caches in the system.

**Endpoint:** `DELETE /api/caching/all`

**Response:**
```json
{
  "success": true,
  "data": {
    "clearedCaches": [
      "user-cache",
      "session-cache",
      "product-cache",
      "config-cache"
    ],
    "totalEntriesCleared": 500,
    "clearedAt": "2024-01-15T12:00:00Z"
  }
}
```

### Remove Cache

Remove a cache completely from the system.

**Endpoint:** `DELETE /api/caching/:cacheName/remove`

**Parameters:**
- `cacheName` (path): Name of the cache to remove

**Response:**
```json
{
  "success": true,
  "data": {
    "name": "user-cache",
    "removedAt": "2024-01-15T12:00:00Z",
    "entriesRemoved": 150
  }
}
```

## Cache Configuration

### Cache Types

The system supports different cache types with various configurations:

#### LRU Cache (Least Recently Used)
```javascript
// Create LRU cache with size limit
const lruCache = {
  name: "lru-cache",
  maximumSize: 1000,
  type: "LRU"
};
```

#### TTL Cache (Time To Live)
```javascript
// Create TTL cache with expiration
const ttlCache = {
  name: "ttl-cache",
  maximumSize: 500,
  expireAfterWriteSeconds: 3600, // 1 hour
  expireAfterAccessSeconds: 1800  // 30 minutes
};
```

#### Size-Based Cache
```javascript
// Create cache with size-based eviction
const sizeCache = {
  name: "size-cache",
  maximumSize: 2000,
  evictionPolicy: "SIZE_BASED"
};
```

### Expiration Policies

#### Write-Based Expiration
- **expireAfterWriteSeconds**: Cache entries expire after a specified time from when they were written
- **Use case**: Data that becomes stale after a certain time period

#### Access-Based Expiration
- **expireAfterAccessSeconds**: Cache entries expire after a specified time from when they were last accessed
- **Use case**: Frequently accessed data that should stay in cache

#### Combined Expiration
```javascript
// Cache expires after 1 hour from write OR 30 minutes from last access
const combinedCache = {
  name: "combined-cache",
  maximumSize: 1000,
  expireAfterWriteSeconds: 3600,  // 1 hour from write
  expireAfterAccessSeconds: 1800  // 30 minutes from access
};
```

## Cache Statistics

### Performance Metrics

Each cache tracks the following performance metrics:

| Metric | Description | Calculation |
|--------|-------------|-------------|
| `hitRate` | Percentage of cache hits | `hits / (hits + misses)` |
| `missRate` | Percentage of cache misses | `misses / (hits + misses)` |
| `evictionCount` | Number of entries evicted | Count of evicted entries |
| `averageLoadTime` | Average time to load data | `totalLoadTime / totalRequests` |

### Cache Health Monitoring

Monitor cache health with these indicators:

```javascript
// Get cache health status
const cacheHealth = {
  name: "user-cache",
  status: "HEALTHY", // HEALTHY, WARNING, CRITICAL
  hitRate: 0.85,
  size: 150,
  maximumSize: 1000,
  utilization: 0.15, // 15% of maximum size
  recommendations: [
    "Cache is performing well",
    "Consider increasing size if hit rate drops"
  ]
};
```

## Cache Usage Patterns

### Common Cache Scenarios

#### User Session Cache
```javascript
// Create user session cache
const sessionCache = {
  name: "user-sessions",
  maximumSize: 10000,
  expireAfterAccessSeconds: 1800, // 30 minutes
  expireAfterWriteSeconds: 7200   // 2 hours
};
```

#### Product Catalog Cache
```javascript
// Create product catalog cache
const productCache = {
  name: "product-catalog",
  maximumSize: 5000,
  expireAfterWriteSeconds: 3600, // 1 hour
  expireAfterAccessSeconds: 1800  // 30 minutes
};
```

#### Configuration Cache
```javascript
// Create configuration cache
const configCache = {
  name: "app-config",
  maximumSize: 100,
  expireAfterWriteSeconds: 86400, // 24 hours
  expireAfterAccessSeconds: 3600  // 1 hour
};
```

#### API Response Cache
```javascript
// Create API response cache
const apiCache = {
  name: "api-responses",
  maximumSize: 2000,
  expireAfterWriteSeconds: 300,   // 5 minutes
  expireAfterAccessSeconds: 300   // 5 minutes
};
```

## Cache Management Best Practices

### Cache Naming Conventions

Use descriptive names that indicate the cache purpose:

```javascript
// Good naming
"user-profile-cache"
"product-catalog-cache"
"session-data-cache"
"api-response-cache"

// Avoid generic names
"cache1"
"temp-cache"
"data-cache"
```

### Size Configuration

Configure cache sizes based on usage patterns:

```javascript
// High-frequency, small data
const smallFrequentCache = {
  name: "user-preferences",
  maximumSize: 10000,
  expireAfterAccessSeconds: 3600
};

// Low-frequency, large data
const largeInfrequentCache = {
  name: "product-images",
  maximumSize: 100,
  expireAfterWriteSeconds: 86400
};
```

### Expiration Strategy

Choose expiration policies based on data characteristics:

```javascript
// Static data (rarely changes)
const staticCache = {
  name: "app-config",
  expireAfterWriteSeconds: 86400 // 24 hours
};

// Dynamic data (changes frequently)
const dynamicCache = {
  name: "user-activity",
  expireAfterWriteSeconds: 300 // 5 minutes
};

// Session data (expires on inactivity)
const sessionCache = {
  name: "user-sessions",
  expireAfterAccessSeconds: 1800 // 30 minutes
};
```

## Error Handling

### Common Error Responses

#### Cache Not Found
```json
{
  "success": false,
  "error": {
    "code": "CACHE_NOT_FOUND",
    "message": "Cache not found",
    "details": {
      "cacheName": "nonexistent-cache"
    }
  }
}
```

#### Invalid Cache Configuration
```json
{
  "success": false,
  "error": {
    "code": "INVALID_CONFIGURATION",
    "message": "Invalid cache configuration",
    "details": {
      "field": "maximumSize",
      "message": "Maximum size must be greater than 0"
    }
  }
}
```

#### Cache Already Exists
```json
{
  "success": false,
  "error": {
    "code": "CACHE_ALREADY_EXISTS",
    "message": "Cache with this name already exists",
    "details": {
      "cacheName": "existing-cache"
    }
  }
}
```

#### Cache Operation Failed
```json
{
  "success": false,
  "error": {
    "code": "CACHE_OPERATION_FAILED",
    "message": "Cache operation failed",
    "details": {
      "operation": "clear",
      "reason": "Cache is locked"
    }
  }
}
```

## Monitoring and Alerting

### Cache Performance Monitoring

Monitor cache performance with these metrics:

```javascript
// Cache performance dashboard
const cacheMetrics = {
  totalCaches: 10,
  totalEntries: 5000,
  averageHitRate: 0.82,
  totalMemoryUsage: "256MB",
  topPerformingCaches: [
    {
      name: "user-cache",
      hitRate: 0.95,
      size: 1000
    },
    {
      name: "product-cache",
      hitRate: 0.88,
      size: 500
    }
  ],
  underperformingCaches: [
    {
      name: "temp-cache",
      hitRate: 0.45,
      size: 50
    }
  ]
};
```

### Alert Conditions

Set up alerts for cache performance issues:

```javascript
// Alert conditions
const alertConditions = {
  lowHitRate: {
    threshold: 0.7,
    message: "Cache hit rate below 70%"
  },
  highMemoryUsage: {
    threshold: 0.9,
    message: "Cache memory usage above 90%"
  },
  highEvictionRate: {
    threshold: 100,
    message: "High cache eviction rate"
  }
};
```

## Example Implementation

```javascript
class CacheManager {
  constructor(apiBaseUrl, accessToken) {
    this.apiBaseUrl = apiBaseUrl;
    this.accessToken = accessToken;
  }

  async createCache(config) {
    const params = new URLSearchParams({
      name: config.name,
      maximumSize: config.maximumSize || 1000
    });

    if (config.expireAfterWriteSeconds) {
      params.append('expireAfterWriteSeconds', config.expireAfterWriteSeconds);
    }

    if (config.expireAfterAccessSeconds) {
      params.append('expireAfterAccessSeconds', config.expireAfterAccessSeconds);
    }

    try {
      const response = await fetch(`${this.apiBaseUrl}/api/caching?${params}`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.accessToken}`
        }
      });

      const result = await response.json();
      
      if (!result.success) {
        throw new Error(result.error.message);
      }

      return result.data;
    } catch (error) {
      console.error('Cache creation failed:', error);
      throw error;
    }
  }

  async getCacheInfo(cacheName) {
    try {
      const response = await fetch(`${this.apiBaseUrl}/api/caching/${cacheName}`, {
        headers: {
          'Authorization': `Bearer ${this.accessToken}`
        }
      });

      const result = await response.json();
      return result.data;
    } catch (error) {
      console.error('Failed to get cache info:', error);
      throw error;
    }
  }

  async clearCache(cacheName) {
    try {
      const response = await fetch(`${this.apiBaseUrl}/api/caching/${cacheName}`, {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${this.accessToken}`
        }
      });

      const result = await response.json();
      return result.data;
    } catch (error) {
      console.error('Cache clear failed:', error);
      throw error;
    }
  }

  async clearMultipleCaches(cacheNames) {
    try {
      const response = await fetch(`${this.apiBaseUrl}/api/caching`, {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${this.accessToken}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(cacheNames)
      });

      const result = await response.json();
      return result.data;
    } catch (error) {
      console.error('Multiple cache clear failed:', error);
      throw error;
    }
  }

  async searchCaches(filters = {}) {
    const searchRequest = {
      fields: ["name", "size", "hitRate", "missRate", "evictionCount"],
      query: [],
      sort: [{ field: "name", direction: 1 }],
      pagination: { page: 0, size: 20 }
    };

    // Add filters
    if (filters.namePattern) {
      searchRequest.query.push({
        field: "name",
        operator: "like",
        value: filters.namePattern,
        type: "string"
      });
    }

    if (filters.minHitRate) {
      searchRequest.query.push({
        field: "hitRate",
        operator: "gte",
        value: filters.minHitRate,
        type: "number"
      });
    }

    try {
      const response = await fetch(`${this.apiBaseUrl}/api/caching/search`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.accessToken}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(searchRequest)
      });

      const result = await response.json();
      return result.data;
    } catch (error) {
      console.error('Cache search failed:', error);
      throw error;
    }
  }
}

// Usage
const cacheManager = new CacheManager('http://localhost:7071', accessToken);

// Create a new cache
const userCache = await cacheManager.createCache({
  name: 'user-profile-cache',
  maximumSize: 1000,
  expireAfterWriteSeconds: 3600,
  expireAfterAccessSeconds: 1800
});

// Get cache information
const cacheInfo = await cacheManager.getCacheInfo('user-profile-cache');
console.log('Cache hit rate:', cacheInfo.hitRate);

// Clear cache
await cacheManager.clearCache('user-profile-cache');

// Search caches
const caches = await cacheManager.searchCaches({
  namePattern: 'user%',
  minHitRate: 0.8
});

// Clear multiple caches
await cacheManager.clearMultipleCaches(['cache1', 'cache2', 'cache3']);
```

## Rate Limiting

Cache management endpoints are subject to rate limiting:

- **Cache creation:** 10 requests per minute
- **Cache operations:** 50 requests per minute
- **Cache search:** 100 requests per minute
- **Cache clearing:** 20 requests per minute

Check response headers for current limits:
- `X-RateLimit-Limit`
- `X-RateLimit-Remaining`
- `X-RateLimit-Reset`
